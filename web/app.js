!function(t){function e(e){for(var a,i,o=e[0],c=e[1],l=e[2],p=0,f=[];p<o.length;p++)i=o[p],n[i]&&f.push(n[i][0]),n[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);for(u&&u(e);f.length;)f.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var t,e=0;e<s.length;e++){for(var r=s[e],a=!0,o=1;o<r.length;o++){var c=r[o];0!==n[c]&&(a=!1)}a&&(s.splice(e--,1),t=i(i.s=r[0]))}return t}var a={},n={0:0},s=[];function i(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=a,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(r,a,function(e){return t[e]}.bind(null,a));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var o=window.webpackJsonp=window.webpackJsonp||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;s.push([72,1]),r()}({36:function(){},37:function(){},38:function(){},40:function(){},41:function(){},42:function(){},43:function(){},44:function(){},45:function(){},72:function(t,e,r){t.exports=r(98)},84:function(){},85:function(){},86:function(){},88:function(t,e,r){"use strict";var a=r(36);r.n(a).a},89:function(t,e,r){"use strict";var a=r(37);r.n(a).a},90:function(t,e,r){"use strict";var a=r(38);r.n(a).a},92:function(t,e,r){"use strict";var a=r(40);r.n(a).a},93:function(t,e,r){"use strict";var a=r(41);r.n(a).a},94:function(t,e,r){"use strict";var a=r(42);r.n(a).a},95:function(t,e,r){"use strict";var a=r(43);r.n(a).a},96:function(t,e,r){"use strict";var a=r(44);r.n(a).a},97:function(t,e,r){"use strict";var a=r(45);r.n(a).a},98:function(t,e,r){"use strict";r.r(e);var a=r(6),n=r(65),s=r(71),i=(r(83),r(84),r(85),r(86),r(3)),o=r.n(i),c=r(7),l=r.n(c),u=r(22),p=r.n(u),f=r(14),h=Object(f.a)({},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("f7-page",[r("f7-navbar",{attrs:{title:"Not found","back-link":"Back"}}),t._v(" "),r("f7-block",{attrs:{strong:""}},[r("p",[t._v("Sorry")]),t._v(" "),r("p",[t._v("Requested content not found.")])])],1)},[],!1,null,null,null).exports,d=r(33),m="/api/activity/j-create",v="/api/activity/j-activities",g="/api/activity/j-detail",b="/api/banner/j-get",w="/api/comment/j-create",k="/api/market/j-create",x="/api/market/j-all",_="/api/market/j-detail",y="/api/comment/j-tweet",I="/api/topic/j-all",C="/api/topic/j-list",T="/api/pet/j-create",P="/api/pet/j-detail",E="/api/tweet/j-create",A="/api/tweet/j-all-tweets",j="/api/tweet/j-like",$="/api/user/person/j-login",O="/api/user/person/j-sign-up",M="/api/user/person/j-all-tweets",S="/api/user/person/j-info",F="/api/user/person/j-activities",L=d.a.request.promise.postJSON;function R(){return function(){return l()(o.a.mark(function t(e){var r,a,n,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.tweetId,a=e.page,n=void 0===a?1:a,t.next=3,L(y,{tweetId:r,offset:n});case 3:return s=t.sent,t.abrupt("return",s);case 5:case"end":return t.stop()}},t)})).apply(this,arguments)}.apply(this,arguments)}function B(){return function(){return l()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L(w,{text:text});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}},t)})).apply(this,arguments)}.apply(this,arguments)}function D(){return function(){return l()(o.a.mark(function t(e){var r,a,n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.type,a=e.tweetId,t.next=3,L(j,{type:r,tweetId:a});case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}},t)})).apply(this,arguments)}.apply(this,arguments)}function z(){return function(){return l()(o.a.mark(function t(e){var r,a,n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.text,a=e.picture,t.next=3,L(E,{text:r,picture:a});case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}},t)})).apply(this,arguments)}.apply(this,arguments)}function U(){return function(){return l()(o.a.mark(function t(e){var r,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.petId,t.next=3,L(P,{petId:r});case 3:return a=t.sent,t.abrupt("return",a);case 5:case"end":return t.stop()}},t)})).apply(this,arguments)}.apply(this,arguments)}function N(){return function(){return l()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L(S);case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}},t)})).apply(this,arguments)}.apply(this,arguments)}function G(){return function(){return l()(o.a.mark(function t(e){var r,a,n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.page,a=void 0===r?1:r,t.next=3,L(M,{offset:a});case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}},t)})).apply(this,arguments)}.apply(this,arguments)}function q(){return function(){return l()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L(_);case 2:if(0===(e=t.sent).iRet)return t.abrupt("return",e.data);t.next=7;break;case 7:return console.error(e),t.abrupt("return",null);case 9:case"end":return t.stop()}},t)})).apply(this,arguments)}.apply(this,arguments)}function V(){return function(){return l()(o.a.mark(function t(e){var r,a,n,s,i,c,l,u,p;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.name,a=e.contact,n=e.phoneNumber,s=e.place,i=e.serveType,c=e.workTime,l=e.intro,u=e.picture,t.next=3,L(k,{name:r,contact:a,phoneNumber:n,place:s,serveType:i,workTime:c,intro:l,picture:u});case 3:return p=t.sent,t.abrupt("return",p);case 5:case"end":return t.stop()}},t)})).apply(this,arguments)}.apply(this,arguments)}function J(){return function(){return l()(o.a.mark(function t(e){var r,a,n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.offset,a=void 0===r?1:r,t.next=3,L(x,{offset:a});case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}},t)})).apply(this,arguments)}.apply(this,arguments)}function Y(){return function(){return l()(o.a.mark(function t(e){var r,a,n,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.topicId,a=e.page,n=void 0===a?1:a,t.next=3,L(C,{topicId:r,offset:n});case 3:return s=t.sent,t.abrupt("return",s);case 5:case"end":return t.stop()}},t)})).apply(this,arguments)}.apply(this,arguments)}function H(){return function(){return l()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L(I);case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}},t)})).apply(this,arguments)}.apply(this,arguments)}function K(){return function(){return l()(o.a.mark(function t(e){var r,a,n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.username,a=e.password,t.next=3,L($,{username:r,password:a});case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}},t)})).apply(this,arguments)}.apply(this,arguments)}function Q(){return function(){return l()(o.a.mark(function t(e){var r,a,n,s,i,c,l,u,p,f,h;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.name,a=e.email,n=e.nickname,s=e.username,i=e.password,c=e.gender,l=e.age,u=e.homeAddress,p=e.workAddress,f=e.picture,t.next=3,L(O,{name:r,email:a,nickname:n,username:s,password:i,gender:c,age:l,homeAddress:u,workAddress:p,picture:f});case 3:return h=t.sent,t.abrupt("return",h);case 5:case"end":return t.stop()}},t)})).apply(this,arguments)}.apply(this,arguments)}function W(){return function(){return l()(o.a.mark(function t(e){var r,a,n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.page,a=void 0===r?1:r,t.next=3,L(F,{offset:a});case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}},t)})).apply(this,arguments)}.apply(this,arguments)}function X(){return function(){return l()(o.a.mark(function t(e){var r,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.activityId,t.next=3,L(g,{activityId:r});case 3:return a=t.sent,t.abrupt("return",a);case 5:case"end":return t.stop()}},t)})).apply(this,arguments)}.apply(this,arguments)}function Z(){return function(){return l()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L(b);case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}},t)})).apply(this,arguments)}.apply(this,arguments)}function tt(){return function(){return l()(o.a.mark(function t(e){var r,a,n,s,i,c,l,u;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.nickname,a=e.gender,n=e.age,s=e.vaccineStatus,i=e.petType,c=e.type,l=e.picture,t.next=3,L(T,{nickname:r,gender:a,age:n,vaccineStatus:s,petType:i,type:c,picture:l});case 3:if(0===(u=t.sent).iRet)return t.abrupt("return",!0);t.next=8;break;case 8:return console.error(u),t.abrupt("return",!1);case 10:case"end":return t.stop()}},t)})).apply(this,arguments)}.apply(this,arguments)}function et(){return function(){return l()(o.a.mark(function t(e){var r,a,n,s,i,c,l,u,p,f,h,d;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.name,a=e.beginTime,n=e.endTime,s=e.totalCount,i=e.totalCost,c=e.joinBeginTime,l=e.joinEndTime,u=e.organizer,p=e.coorganizer,f=e.type,h=e.place,d=e.picture,t.next=3,L(m,{name:r,beginTime:a,endTime:n,totalCount:s,totalCost:i,joinBeginTime:c,joinEndTime:l,organizer:u,coorganizer:p,type:f,place:h,picture:d});case 3:if(0===t.sent.iRet)return t.abrupt("return",!0);t.next=8;break;case 8:return console.error(error),t.abrupt("return",!1);case 10:case"end":return t.stop()}},t)})).apply(this,arguments)}.apply(this,arguments)}function rt(){return function(){return l()(o.a.mark(function t(e){var r,a,n=arguments;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=1<n.length&&void 0!==n[1]?n[1]:1,t.next=3,L(v,{type:e,offset:r});case 3:if(0===(a=t.sent).iRet)return t.abrupt("return",a.data);t.next=8;break;case 8:return console.error(a),t.abrupt("return",[]);case 10:case"end":return t.stop()}},t)})).apply(this,arguments)}.apply(this,arguments)}var at=/^(?:image\/bmp|image\/cis\-cod|image\/gif|image\/ief|image\/jpeg|image\/jpeg|image\/jpeg|image\/pipeg|image\/png|image\/svg\+xml|image\/tiff|image\/x\-cmu\-raster|image\/x\-cmx|image\/x\-icon|image\/x\-portable\-anymap|image\/x\-portable\-bitmap|image\/x\-portable\-graymap|image\/x\-portable\-pixmap|image\/x\-rgb|image\/x\-xbitmap|image\/x\-xpixmap|image\/x\-xwindowdump)$/i;function nt(){var t=new Date,e=t.getUTCFullYear(),r=t.getUTCMonth()+1,a=t.getUTCDay(),n=t.getUTCHours()+8,s=t.getUTCMinutes(),i=t.getUTCSeconds();return new Date(Date.UTC(e,r,a,n,s,i))}var st,it,ot,ct,lt,ut,pt,ft,ht,dt,mt,vt,gt,bt,wt,kt,xt,_t,yt,It,Ct,Tt,Pt,Et,At,jt,$t,Ot,Mt=["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],St=function(){for(var t=[],e=0;e<23;e++)t[e]=e+1;return t}(),Ft=function(){for(var t=[],e=0;e<60;e++)t[e]=e<10?"0".concat(e):e;return t}(),Lt=r(20),Rt={props:{data:{type:Object,default:function(){return{}}},enableToolBar:{type:Boolean,default:!0}},data:function(){return{likeStyle:"iconfont icon-like"}},methods:p()({},Object(Lt.d)(["home/updateTweetById"]),{cardClick:function(t){this.$emit("card:content-click",t)},likeClick:(st=l()(o.a.mark(function t(e){var r,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=1,"iconfont icon-like"!==this.likeStyle&&(r=2),t.prev=2,t.next=5,D({tweetId:e,type:r});case 5:0===(a=t.sent).iRet?"iconfont icon-like"===this.likeStyle?(this.likeStyle="iconfont icon-like1",this["home/updateTweetById"]({tweetId:e,liked:!1})):(this["home/updateTweetById"]({tweetId:e,liked:!0}),this.likeStyle="iconfont icon-like"):console.error(a),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.error(t.t0);case 12:case"end":return t.stop()}},t,this,[[2,9]])})),function(){return st.apply(this,arguments)})})},Bt=(r(88),Object(f.a)(Rt,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"me-post-card-container",on:{click:function(){return t.cardClick(t.data)}}},[r("f7-card",{staticClass:"me-post-card"},[r("f7-card-header",[r("div",{staticClass:"me-avatar"},[r("img",{staticClass:"lazy lazy-fade-in",attrs:{src:t.data.avatar}})]),t._v(" "),r("div",{staticClass:"me-user"},[r("div",{staticClass:"me-name"},[t._v(t._s(t.data.nickname))]),t._v(" "),r("div",{staticClass:"me-create-time"},[t._v(t._s(t.data.createTime))])])]),t._v(" "),r("f7-card-content",[r("div",{staticClass:"text me-text"},[t._v(t._s(t.data.text))]),t._v(" "),t.data.image?r("div",{staticClass:"me-image"},[r("img",{staticClass:"lazy",attrs:{src:t.data.image}})]):t._e()]),t._v(" "),t.enableToolBar?r("f7-card-footer",{staticClass:"me-flex-row"},[r("f7-link",[r("i",{staticClass:"iconfont icon-comment"}),t._v(" "),r("span",{staticClass:"text me-comment"},[t._v(t._s(t.data.commentCount))])]),t._v(" "),r("f7-link",{on:{click:function(e){return e.stopPropagation(),t.likeClick(t.data.tweetId)}}},[r("i",{class:t.likeStyle}),t._v(" "),r("span",{staticClass:"text me-like"},[t._v(t._s(t.data.likeCount))])])],1):t._e()],1)],1)},[],!1,null,null,null).exports),Dt={components:{Card:Bt},props:{loadCardData:{type:Array,required:!0}},data:function(){return{refreshing:!1,loadingMore:!1,loadedEnd:!1}},methods:{routeToCardDetail:function(t){t&&this.$f7router.navigate("/tweet/".concat(t.tweetId),{props:{tweet:t}})}}},zt=Object(f.a)(Dt,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"me-card-list"},t._l(t.loadCardData,function(e){return r("card",{key:e.tweetId,attrs:{data:e},on:{"card:content-click":function(){return t.routeToCardDetail(e)}}})}),1)},[],!1,null,null,null).exports,Ut={props:{bannerImages:{type:Array,default:function(){return[]}}},mounted:function(){},data:function(){return{loop:!0,params:{speed:400,spaceBetween:10,observer:!0,observeParents:!0,autoplay:{delay:1500,disableOnInteraction:!1}}}}},Nt=(r(89),Object(f.a)(Ut,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("f7-swiper",{staticClass:"me-swiper",attrs:{params:t.params,init:"",pagination:""}},t._l(t.bannerImages,function(t,e){return r("f7-swiper-slide",{key:e},[r("img",{staticClass:"lazy",attrs:{src:t.imgUrl}})])}),1)},[],!1,null,"75757b5a",null).exports),Gt={props:{topics:{type:Array,default:function(){return[]}}},methods:{getTopicLink:function(t){return"/topic/".concat(t.topicId,"/")}}},qt=Object(f.a)(Gt,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("f7-block-title",[t._v("近期话题")]),t._v(" "),t.topics.length?r("f7-list",t._l(t.topics,function(e){return r("f7-list-item",{key:e.id,attrs:{title:e.text,link:t.getTopicLink(e)}})}),1):r("f7-block",{attrs:{inset:""}},[t._v("暂无话题")])],1)},[],!1,null,null,null).exports,Vt=(r(0),Object(Lt.a)("home")),Jt=Vt.mapActions,Yt=Vt.mapState,Ht=Vt.mapGetters,Kt={components:{CardList:zt,BannerSwiper:Nt,TopicList:qt},computed:p()({},Yt(["tweets"]),Ht(["isTweetLoadAll"]),Object(Lt.e)(["user"])),data:function(){return{bannerImages:[],showPreloader:!0,allowInfinite:!0,isInfinite:!0,topics:[],isPageFirstIn:!1}},methods:p()({onPageBeforeIn:(ut=l()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isPageFirstIn)return t.abrupt("return");t.next=2;break;case 2:return this.$f7.preloader.show(),t.next=5,this.getUserStatus();case 5:if(!0===this.user.isLogin)return t.next=8,this.getBannerImages();t.next=14;break;case 8:return t.next=10,this.getIndexTweets();case 10:this.tweets.length<6&&(this.showPreloader=!1),this.$f7.preloader.hide(),t.next=16;break;case 14:this.$f7.preloader.hide(),this.$f7router.back("/user/login");case 16:this.isPageFirstIn=!0;case 17:case"end":return t.stop()}},t,this)})),function(){return ut.apply(this,arguments)})},Jt(["getIndexTweets","loadMoreTweets"]),Object(Lt.d)(["updatePopup"]),Object(Lt.c)(["getUserStatus"]),{onRefresh:(lt=l()(o.a.mark(function t(e,r){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getIndexTweets();case 2:r();case 3:case"end":return t.stop()}},t,this)})),function(){return lt.apply(this,arguments)}),openPublisherPopup:function(){this.updatePopup({key:"publisherOpened",value:!0})},loadMore:(ct=l()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.allowInfinite||this.isTweetLoadAll)return t.abrupt("return");t.next=2;break;case 2:return this.allowInfinite=!1,t.prev=3,t.next=6,this.loadMoreTweets();case 6:this.isTweetLoadAll&&(this.isInfinite=!1,this.showPreloader=!1),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),console.error(t.t0);case 12:return t.prev=12,this.allowInfinite=!0,t.finish(12);case 15:case"end":return t.stop()}},t,this,[[3,9,12,15]])})),function(){return ct.apply(this,arguments)}),getBannerImages:(ot=l()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Z();case 3:0===(e=t.sent).iRet?this.bannerImages=e.data:console.error(error),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])})),function(){return ot.apply(this,arguments)}),getAllTopics:(it=l()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(t.prev=0)!==this.user.isLogin)return t.abrupt("return");t.next=3;break;case 3:return t.next=5,H();case 5:0===(e=t.sent).iRet?this.topics=e.data:console.error(e),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0);case 12:case"end":return t.stop()}},t,this,[[0,9]])})),function(){return it.apply(this,arguments)})})},Qt=Object(f.a)(Kt,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("f7-page",{attrs:{id:"homeView","page-content":!1,tabs:"","with-subnavbar":"","no-swipeback":""},on:{"page:beforein":t.onPageBeforeIn}},[r("f7-navbar",{attrs:{title:"首页"}},[r("f7-nav-right",[r("f7-link",{staticClass:"icon iconfont icon-edit1",on:{click:t.openPublisherPopup}})],1),t._v(" "),r("f7-subnavbar",{staticClass:"me-home-subnavbar"},[r("f7-segmented",{attrs:{raised:""}},[r("f7-button",{attrs:{"tab-link":"#tab-tweets","tab-link-active":""}},[t._v("精选")]),t._v(" "),r("f7-button",{attrs:{"tab-link":"#tab-topics"}},[t._v("话题")])],1)],1)],1),t._v(" "),r("f7-page-content",{staticClass:"page-content",attrs:{id:"tab-tweets","tab-active":"",tab:"",ptr:"","infinite-preloader":t.showPreloader},on:{"ptr:refresh":t.onRefresh,infinite:t.loadMore}},[r("banner-swiper",{attrs:{bannerImages:t.bannerImages}}),t._v(" "),t.tweets.length?r("card-list",{attrs:{loadCardData:t.tweets}}):r("f7-block",{attrs:{inset:""}},[t._v("暂无动态~")])],1),t._v(" "),r("f7-page-content",{staticClass:"page-content",attrs:{id:"tab-topics",tab:""}},[r("banner-swiper",{attrs:{bannerImages:t.bannerImages}}),t._v(" "),r("topic-list",{attrs:{topics:t.topics}})],1)],1)},[],!1,null,null,null).exports,Wt={components:{CardList:zt},props:{topicId:{default:null}},data:function(){return{backText:"返回",topicText:"话题页",showPreloader:!0,allowInfinite:!0,isLoadAll:!1,tweets:[],page:1}},methods:{onRefresh:(ft=l()(o.a.mark(function t(e){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getIndexTweets();case 2:e();case 3:case"end":return t.stop()}},t,this)})),function(){return ft.apply(this,arguments)}),getIndexTweets:(pt=l()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Y({topicId:this.topicId});case 3:0===(e=t.sent).iRet?this.tweets=e.data:console.error(e),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])})),function(){return pt.apply(this,arguments)}),trimTopicText:function(t){return 10<(t=t||"").length&&(t=t.substr(0,10)+"..."),t}}},Xt=Object(f.a)(Wt,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("f7-page",{attrs:{id:"topicDetailView","no-toolbar":"",ptr:"","infinite-preloader":t.showPreloader},on:{"ptr:refresh":t.onRefresh,infinite:t.loadMoreTweets}},[r("f7-navbar",{attrs:{title:t.trimTopicText(t.topicText),"back-link":t.backText}}),t._v(" "),r("div",{staticClass:"me-topic-list"},[t.tweets.length?r("card-list",{attrs:{loadCardData:t.tweets}}):r("f7-block",{attrs:{inset:""}},[t._v("暂无相关动态")])],1)],1)},[],!1,null,null,null).exports,Zt={components:{Card:Bt},props:{tweet:{type:Object,required:!0}},data:function(){return{backText:"返回",likeStyle:"iconfont icon-like",comments:[],isPageFirstIn:!1}},methods:p()({onPageBeforeIn:function(){this.isPageFirstIn}},Object(Lt.d)(["updatePopup","home/updateTweetById"]),{getAllComment:(dt=l()(o.a.mark(function t(){var e,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.tweet.tweetId){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,R({tweetId:e});case 6:0===(r=t.sent).iRet?this.comments=r.data:console.error(r),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),console.error(t.t0);case 13:case"end":return t.stop()}},t,this,[[3,10]])})),function(){return dt.apply(this,arguments)}),triggerLike:(ht=l()(o.a.mark(function t(e,r){var a,n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=1,"iconfont icon-like"!==this.likeStyle&&(a=2),t.next=5,D({tweetId:e,type:a});case 5:0===(n=t.sent).iRet?"iconfont icon-like"===this.likeStyle?(this.likeStyle="iconfont icon-like1",this["home/updateTweetById"]({tweetId:e,liked:!1})):(this["home/updateTweetById"]({tweetId:e,liked:!0}),this.likeStyle="iconfont icon-like"):console.error(n),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0);case 12:case"end":return t.stop()}},t,this,[[0,9]])})),function(){return ht.apply(this,arguments)}),openCommentPopup:function(){this.updatePopup({key:"commentOpened",value:!0})}})},te=(r(90),Object(f.a)(Zt,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("f7-page",{staticClass:"me-tweet-detail",attrs:{"no-toolbar":""}},[r("f7-navbar",{attrs:{"back-link":t.backText,sliding:""}}),t._v(" "),r("card",{attrs:{enableToolBar:!1,data:t.tweet}}),t._v(" "),r("div",{staticClass:"me-comments"},[r("div",{staticClass:"me-title"},[r("span",[t._v("评论")])]),t._v(" "),t.comments.length?r("div",{staticClass:"me-comments-list"},t._l(t.comments,function(e){return r("div",{key:e.commentId,staticClass:"me-comment"},[r("img",{staticClass:"me-avatar lazy lazy-fade-in",attrs:{src:e.avatar,alt:""}}),t._v(" "),r("div",{staticClass:"me-detail"},[r("div",{staticClass:"me-nickname"},[t._v(t._s(e.nickname))]),t._v(" "),r("div",{staticClass:"me-time"},[t._v(t._s(e.createTime))]),t._v(" "),r("div",{staticClass:"me-text"},[t._v(t._s(e.text))])])])}),0):r("div",{staticClass:"me-no-comment"},[r("i",{staticClass:"iconfont icon-wujieguoyangshi"}),t._v(" "),r("div",{staticClass:"me-text me-no-content"},[r("span",[t._v("暂无内容")])])])]),t._v(" "),r("f7-toolbar",{staticClass:"me-flex-row",attrs:{position:"bottom"}},[r("f7-link",{staticClass:"me-tool me-tool-border",on:{click:t.openCommentPopup}},[r("span",{staticClass:"iconfont icon-comment"}),t._v(" "),r("span",{staticClass:"text",domProps:{textContent:t._s(t.tweet.commentCount?t.tweet.commentCount:"评论")}})]),t._v(" "),r("f7-link",{staticClass:"me-tool me-tool-border",on:{click:function(){return t.triggerLike(t.tweet.tweetId,t.tweet.liked)}}},[r("span",{class:t.likeStyle}),t._v(" "),r("span",{staticClass:"text",domProps:{textContent:t._s(t.tweet.likeCount?t.tweet.likeCount:"喜欢")}})])],1)],1)},[],!1,null,"64b1199a",null).exports),ee=r(9),re=r.n(ee),ae={props:{competeActivities:{type:Array}},methods:{getDetailLink:function(t){return"/activities/detail/".concat(t.activityId)},formatSubtitle:function(t){return"总人数: ".concat(t.totalCount," 人")},formatPlace:function(t){return"活动地点: ".concat(t.place)}}},ne={components:{BannerSwiper:Nt,CompeteActivity:Object(f.a)(ae,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("f7-list",{staticClass:"me-media-list me-compete-activity",attrs:{"media-list":""}},t._l(t.competeActivities,function(e){return r("f7-list-item",{key:e.activityId,attrs:{"media-item":"",subtitle:t.formatSubtitle(e),title:e.name,text:t.formatPlace(e),link:t.getDetailLink(e)}},[r("img",{staticClass:"lazy lazy-fade-in",attrs:{slot:"media",src:e.image,width:"80"},slot:"media"})])}),1)},[],!1,null,null,null).exports},computed:p()({},Object(Lt.e)(["user"])),data:function(){return{competePage:1,partyPage:1,travelPage:1,competeAllowInfinite:!0,partyAllowInfinite:!0,travelAllowInfinite:!0,showCompetePre:!0,showPartyPre:!0,showTravelPre:!0,bannerImages:[],competeActivities:[],partyActivities:[],travelActivities:[]}},methods:{onPageBeforeIn:function(){this.user.isLogin&&(this.getBannerImages(),this.initActivities())},initActivities:(_t=l()(o.a.mark(function t(){var e,r,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,rt(1);case 2:return(e=t.sent).length<6&&(this.showCompetePre=!1),this.competeActivities=e,t.next=7,rt(2);case 7:return(r=t.sent).length<6&&(this.showPartyPre=!1),this.partyActivities=r,t.next=12,rt(3);case 12:(a=t.sent).length<6&&(this.showTravelPre=!1),this.travelActivities=a;case 15:case"end":return t.stop()}},t,this)})),function(){return _t.apply(this,arguments)}),onCompetePageRefresh:(xt=l()(o.a.mark(function t(e,r){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,rt(1);case 3:0===(a=t.sent).iRet?this.competeActivities=a.data:console.error(a),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:return t.prev=10,r(),t.finish(10);case 13:case"end":return t.stop()}},t,this,[[0,7,10,13]])})),function(){return xt.apply(this,arguments)}),onPartyPageRefresh:(kt=l()(o.a.mark(function t(e,r){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,rt(2);case 3:0===(a=t.sent).iRet?this.partyActivities=a.data:console.error(a),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:return t.prev=10,r(),t.finish(10);case 13:case"end":return t.stop()}},t,this,[[0,7,10,13]])})),function(){return kt.apply(this,arguments)}),onTravelPageRefresh:(wt=l()(o.a.mark(function t(e,r){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,rt(t.next=3);case 3:0===(a=t.sent).iRet?this.travelActivities=a.data:console.error(a),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:return t.prev=10,r(),t.finish(10);case 13:case"end":return t.stop()}},t,this,[[0,7,10,13]])})),function(){return wt.apply(this,arguments)}),onCompetePageLoadMore:(bt=l()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.competeAllowInfinite){t.next=3;break}return t.abrupt("return");case 3:return this.competeAllowInfinite=!1,t.next=6,rt(1,this.competePage+1);case 6:if(0!==(e=t.sent).iRet){t.next=15;break}if(0===e.data.length)return this.showCompetePre=!1,t.abrupt("return");t.next=11;break;case 11:this.competePage+=1,this.competeActivities=[].concat(re()(this.competeActivities),re()(e.data)),t.next=16;break;case 15:console.error(e);case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),console.error(t.t0);case 21:return t.prev=21,this.competeAllowInfinite=!0,t.finish(21);case 24:case"end":return t.stop()}},t,this,[[0,18,21,24]])})),function(){return bt.apply(this,arguments)}),onPartyPageLoadMore:(gt=l()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.partyAllowInfinite){t.next=3;break}return t.abrupt("return");case 3:return this.partyAllowInfinite=!1,t.next=6,rt(2,this.partyPage+1);case 6:if(0!==(e=t.sent).iRet){t.next=15;break}if(0===e.data.length)return this.showPartyPre=!1,t.abrupt("return");t.next=11;break;case 11:this.partyPage+=1,this.partyActivities=[].concat(re()(this.partyActivities),re()(e.data)),t.next=16;break;case 15:console.error(e);case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),console.error(t.t0);case 21:return t.prev=21,this.partyAllowInfinite=!0,t.finish(21);case 24:case"end":return t.stop()}},t,this,[[0,18,21,24]])})),function(){return gt.apply(this,arguments)}),onTravelPageLoadMore:(vt=l()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.travelAllowInfinite){t.next=3;break}return t.abrupt("return");case 3:return this.travelAllowInfinite=!1,t.next=6,rt(3,this.travelPage+1);case 6:if(0!==(e=t.sent).iRet){t.next=15;break}if(0===e.data.length)return this.showTravelPre=!1,t.abrupt("return");t.next=11;break;case 11:this.travelPage+=1,this.travelActivities=[].concat(re()(this.travelActivities),re()(e.data)),t.next=16;break;case 15:console.error(e);case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),console.error(t.t0);case 21:return t.prev=21,this.travelAllowInfinite=!0,t.finish(21);case 24:case"end":return t.stop()}},t,this,[[0,18,21,24]])})),function(){return vt.apply(this,arguments)}),getBannerImages:(mt=l()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Z();case 3:0===(e=t.sent).iRet?this.bannerImages=e.data:console.error(e),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])})),function(){return mt.apply(this,arguments)})}},se=Object(f.a)(ne,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("f7-page",{attrs:{id:"activitiesView","page-content":!1,tabs:"","with-subnavbar":""},on:{"page:beforein":t.onPageBeforeIn}},[r("f7-navbar",{attrs:{title:"活动"}},[r("f7-subnavbar",{staticClass:"me-activity-subnavbar"},[r("f7-segmented",{attrs:{raised:""}},[r("f7-button",{attrs:{"tab-link":"#me-activity-1","tab-link-active":""}},[t._v("宠物赛事")]),t._v(" "),r("f7-button",{attrs:{"tab-link":"#me-activity-2"}},[t._v("宠物趴体")]),t._v(" "),r("f7-button",{attrs:{"tab-link":"#me-activity-3"}},[t._v("带宠旅行")])],1)],1)],1),t._v(" "),r("f7-page-content",{attrs:{id:"me-activity-1",tab:"","tab-active":"",ptr:"",infinite:"","infinite-preloader":t.showCompetePre},on:{"ptr:refresh":t.onCompetePageRefresh,infinite:t.onCompetePageLoadMore}},[r("banner-swiper",{attrs:{bannerImages:t.bannerImages}}),t._v(" "),t.competeActivities.length?r("compete-activity",{attrs:{competeActivities:t.competeActivities}}):r("f7-block",{attrs:{inset:""}},[r("p",[t._v("暂无宠物赛事~")])])],1),t._v(" "),r("f7-page-content",{attrs:{id:"me-activity-2",tab:"",inifite:"",ptr:"","infinite-preloader":t.showPartyPre},on:{"ptr:refresh":t.onPartyPageRefresh,infinite:t.onPartyPageLoadMore}},[t.bannerImages.length?r("banner-swiper",{attrs:{bannerImages:t.bannerImages}}):t._e(),t._v(" "),t.competeActivities.length?r("compete-activity",{attrs:{competeActivities:t.competeActivities}}):r("f7-block",{attrs:{inset:""}},[t._v("暂无宠物趴体~")])],1),t._v(" "),r("f7-page-content",{attrs:{id:"me-activity-3",tab:"",ptr:"","infinite-preloader":t.showTravelPre,infinite:""},on:{"ptr:refresh":t.onTravelPageRefresh,infinite:t.onTravelPageLoadMore}},[t.bannerImages.length?r("banner-swiper",{attrs:{bannerImages:t.bannerImages}}):t._e(),t._v(" "),t.competeActivities.length?r("compete-activity",{attrs:{competeActivities:t.competeActivities}}):r("f7-block",{attrs:{inset:""}},[t._v("暂无带宠旅行~")])],1),t._v(" "),r("f7-fab",{attrs:{slot:"fixed",position:"right-bottom",color:"orange",href:"/activities/add"},slot:"fixed"},[r("f7-icon",{attrs:{ios:"f7:add",aurora:"f7:add",md:"material:add"}})],1)],1)},[],!1,null,null,null).exports,ie={props:{placeholder:{type:String,default:""},elementId:{type:String,required:!0},time:{type:String,required:!0},type:{type:String,required:!0}},mounted:function(){var t=nt();this.$f7.picker.create({inputEl:"#".concat(this.elementId),rotateEffect:!0,openIn:"sheet",formatValue:function(t){return t=[t[0]].concat(re()(t.slice(1,4).map(function(t){return t<10?"0".concat(t):t})),re()(t.slice(4))),console.log(t),"".concat(t[0],"-").concat(t[1],"-").concat(t[2]," ").concat(t[3],":").concat(t[4],":").concat(t[5])},cols:[{values:function(t){for(var e=(arguments.length,5),r=[],a=nt().getFullYear(),n=0;n<e;n++)r.push("".concat(a+n));return r}()},{values:[1,2,3,4,5,6,7,8,9,10,11,12],displayValues:Mt,textAlign:"left"},{values:function(t,e){for(var r=new Date(t,e,0).getDate(),a=[],n=0;n<r;n++)a[n]="".concat(n+1);return a}(t.getFullYear(),t.getMonth())},{values:St},{divider:!0,content:":"},{values:Ft},{divider:!0,content:":"},{values:Ft}],on:{change:function(t,e){var r=new Date(e[0],e[1],0).getDate();e[2]>r&&t.cols[2].setValue(r)}}})},methods:{onChange:function(t){this.$emit("input:change",{type:this.type,value:t.target.value})}}},oe=Object(f.a)(ie,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"item-content item-input"},[r("div",{staticClass:"item-inner"},[r("div",{staticClass:"item-title item-label"},[t._v(t._s(t.placeholder))]),t._v(" "),r("div",{staticClass:"item-input-wrap"},[r("input",{attrs:{type:"text",placeholder:t.placeholder,readonly:"readonly",id:t.elementId},on:{change:t.onChange}})])])])},[],!1,null,null,null).exports,ce=r(27),le={components:{DateTime:oe,PictureInput:ce.a},data:function(){return{name:"",beginTime:"",endTime:"",totalCount:0,totalCost:0,joinBeginTime:"",joinEndTime:"",organizer:"",coorganizer:"",type:-1,place:"",picture:"",showNameErrorFlag:!1,showTypeErrorFlag:!1,showPlaceErrorFlag:!1,showTotalCountErrorFlag:!1,showTotalCostErrorFlag:!1,showOrganizerErrorFlag:!1,showCoorganizerErrorFlag:!1}},methods:{onChange:function(t){this.picture=t},toast:function(t){this.$f7.toast.create({text:t,closeTimeout:2e3,position:"center"}).open()},dateTimeChange:function(t){var e=t.type,r=t.value;"beginTime"===e?this.beginTime=r:"endTime"===e?this.endTime=r:"joinBeginTime"===e?this.joinBeginTime=r:"joinEndTime"===e&&(this.joinEndTime=r)},submitActivityData:(yt=l()(o.a.mark(function t(){var e,r=this;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,setTimeout(function(){r.showNameErrorFlag=!1,r.showTypeErrorFlag=!1,r.showPlaceErrorFlag=!1,r.showTotalCountErrorFlag=!1,r.showTotalCostErrorFlag=!1,r.showOrgazierErrorFlag=!1,r.showCoorgazierErrorFlag=!1},3e3),this.name){t.next=4;break}return t.abrupt("return",this.showNameErrorFlag=!0);case 4:if(this.type){t.next=6;break}return t.abrupt("return",this.showTypeErrorFlag=!0);case 6:if(this.place){t.next=8;break}return t.abrupt("return",this.showPlaceErrorFlag=!0);case 8:if(this.totalCount){t.next=10;break}return t.abrupt("return",this.showTotalCountErrorFlag=!0);case 10:if(this.totalCost){t.next=12;break}return t.abrupt("return",this.showTotalCostErrorFlag=!0);case 12:if(this.organizer){t.next=14;break}return t.abrupt("return",this.showOrgazierErrorFlag=!0);case 14:if(this.coorganizer){t.next=16;break}return t.abrupt("return",this.showCoorgazierErrorFlag=!0);case 16:if(this.picture){t.next=18;break}return t.abrupt("return",this.toast("活动封面图片不能为空"));case 18:return this.$f7.preloader.show(),t.next=21,et(this);case 21:if(e=t.sent,this.$f7.preloader.hide(),e){t.next=27;break}return console.log("创建活动失败",e),this.toast("创建活动失败"),t.abrupt("return");case 27:this.toast("创建活动成功"),this.resetAllProps(),setTimeout(function(){r.back()},1e3),t.next=37;break;case 32:t.prev=32,t.t0=t.catch(0),console.error(t.t0),this.$f7.preloader.hide(),this.$f7.toast.create({text:"创建活动失败"});case 37:case"end":return t.stop()}},t,this,[[0,32]])})),function(){return yt.apply(this,arguments)}),resetAllProps:function(){this.name="",this.beginTime="",this.endTime="",this.totalCount=0,this.totalCost=0,this.joinBeginTime="",this.joinEndTime="",this.organizer="",this.coorganizer="",this.type=-1,this.place=""},back:function(){this.$f7router.back()}}},ue=Object(f.a)(le,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("f7-page",{staticClass:"me-add-activity",attrs:{"no-toolbar":""}},[r("f7-navbar",{attrs:{"back-link":"返回",sliding:"",title:"添加活动"}}),t._v(" "),r("f7-list",{attrs:{"no-hairlines-md":""}},[r("f7-list-input",{attrs:{label:"活动名称",type:"text",value:t.name,placeholder:"活动名称","error-message":"活动名称不能为空","error-message-force":t.showNameErrorFlag},on:{input:function(e){t.name=e.target.value}}}),t._v(" "),r("f7-list-input",{attrs:{label:"活动类型",type:"select",value:t.type,"error-message":"活动赛事不能为空","error-message-force":t.showTypeErrorFlag},on:{input:function(e){t.type=e.target.value}}},[r("option",{attrs:{value:"1"}},[t._v("萌宠赛事")]),t._v(" "),r("option",{attrs:{value:"2"}},[t._v("宠物趴体")]),t._v(" "),r("option",{attrs:{value:"3"}},[t._v("带宠旅行")])]),t._v(" "),r("f7-list-input",{attrs:{label:"活动地点",value:t.place,placehodler:"活动地点","error-message":"活动地点不能为空","error-message-force":t.showPlaceErrorFlag},on:{input:function(e){t.place=e.target.value}}}),t._v(" "),r("f7-list-input",{attrs:{label:"报名总人数",value:t.totalCount,placeholder:"总人数",type:"number","error-message":"总人数不能为0","error-message-force":t.showTotalCountErrorFlag},on:{input:function(e){t.totalCount=e.target.value}}}),t._v(" "),r("f7-list-input",{attrs:{label:"报名总费用",value:t.totalCost,placeholder:"总费用",type:"number","error-message":"总费用不能为0","error-message-force":t.showTotalCostErrorFlag},on:{input:function(e){t.totalCost=e.target.value}}}),t._v(" "),r("li",[r("date-time",{attrs:{elementId:"me-activity-begin-time",time:t.beginTime,type:"beginTime",placeholder:"活动开始时间"},on:{"input:change":t.dateTimeChange}})],1),t._v(" "),r("li",[r("date-time",{attrs:{elementId:"me-activity-end-time",time:t.endTime,type:"endTime",placeholder:"活动截止时间"},on:{"input:change":t.dateTimeChange}})],1),t._v(" "),r("li",[r("date-time",{attrs:{elementId:"me-activity-join-begin-time",time:t.joinBeginTime,type:"joinBeginTime",placeholder:"报名开始时间"},on:{"input:change":t.dateTimeChange}})],1),t._v(" "),r("li",[r("date-time",{attrs:{elementId:"me-activity-join-end-time",time:t.joinEndTime,type:"joinEndTime",placeholder:"报名截止时间"},on:{"input:change":t.dateTimeChange}})],1),t._v(" "),r("f7-list-input",{attrs:{label:"主办方",type:"text",value:t.organizer,placeholder:"主办方","error-message":"主办方不能为空","error-message-force":t.showOrganizerErrorFlag},on:{input:function(e){t.organizer=e.target.value}}}),t._v(" "),r("f7-list-input",{attrs:{label:"承办方",type:"text",value:t.coorganizer,placeholder:"承办方","error-message":"承办方不能为空","error-message-force":t.showCoorganizerErrorFlag},on:{input:function(e){t.coorganizer=e.target.value}}})],1),t._v(" "),r("div",{staticClass:"block block-strong"},[r("div",{staticClass:"block-header"},[t._v("上传活动图片")]),t._v(" "),r("picture-input",{ref:"pictureInput",attrs:{width:"200",height:"200",margin:"16",accept:"image/jpeg, image/png",size:"10",hideChangeButton:"",removable:!0,customStrings:{upload:"<p>上传活动图片</p>",tap:"<p>上传活动图片</p>",remove:"清除"}},on:{change:t.onChange}})],1),t._v(" "),r("f7-block",[r("f7-row",[r("f7-button",{staticClass:"col",attrs:{raised:""},on:{click:t.back}},[t._v("取消")]),t._v(" "),r("f7-button",{staticClass:"col",attrs:{fill:"",raised:"",color:"green"},on:{click:t.submitActivityData}},[t._v("提交")])],1)],1)],1)},[],!1,null,null,null).exports,pe={components:{PictureInput:ce.a},data:function(){return{nickname:"",showNicknameErrorFlag:!1,gender:0,showGenderErrorFlag:!1,age:0,vaccineStatus:0,petType:0,type:"",picture:""}},methods:{onChange:function(t){this.picture=t},toast:function(t){this.$f7.toast.create({text:t,closeTimeout:2e3,position:"center"}).open()},submitPetData:(It=l()(o.a.mark(function t(){var e,r=this;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,setTimeout(function(){r.showNicknameErrorFlag=!1,r.showGenderErrorFlag=!1},3e3),this.nickname){t.next=4;break}return t.abrupt("return",this.showNicknameErrorFlag=!0);case 4:if(this.gender){t.next=6;break}return t.abrupt("return",this.showGenderErrorFlag=!0);case 6:if(this.picture){t.next=8;break}return t.abrupt("return",this.toast("宠物头像不能为空"));case 8:return this.$f7.preloader.show(),t.next=11,tt(this);case 11:if(e=t.sent,this.$f7.preloader.hide(),e){t.next=17;break}return console.log("添加宠物失败",e),this.toast("添加宠物失败"),t.abrupt("return");case 17:this.toast("添加宠物成功"),this.resetAllProps(),t.next=26;break;case 21:t.prev=21,t.t0=t.catch(0),console.error(t.t0),this.$f7.preloader.hide(),this.toast("添加宠物失败");case 26:case"end":return t.stop()}},t,this,[[0,21]])})),function(){return It.apply(this,arguments)}),back:function(){this.$f7router.back()},resetAllProps:function(){this.nickname="",this.gender=0,this.age=0,this.vaccineStatus=0,this.petType=0,this.type="",this.picture=""}}},fe=Object(f.a)(pe,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("f7-page",{staticClass:"me-sign-up",attrs:{"no-toolbar":""}},[r("f7-navbar",{attrs:{"back-link":"返回",sliding:"",title:"添加宠物"}}),t._v(" "),r("f7-list",{attrs:{"no-hairlines-md":""}},[r("f7-list-input",{attrs:{value:t.nickname,label:"宠物昵称",type:"text",placeholder:"宠物昵称","error-message":"宠物昵称不能为空","error-message-force":t.showNicknameErrorFlag}}),t._v(" "),r("f7-list-input",{attrs:{value:t.gender,label:"性别",type:"select","error-message":"性别不能为空","error-message-force":t.showGenderErrorFlag}},[r("option",{attrs:{value:"1"}},[t._v("公")]),t._v(" "),r("option",{attrs:{value:"2"}},[t._v("母")])]),t._v(" "),r("f7-list-input",{attrs:{label:"年龄",input:!1}},[r("f7-range",{attrs:{slot:"input",value:t.age,label:"",min:1,max:100,step:1},slot:"input"})],1),t._v(" "),r("f7-list-input",{attrs:{value:t.vaccineStatus,label:"疫苗状况",type:"select"}},[r("option",{attrs:{value:"1"}},[t._v("已接种")]),t._v(" "),r("option",{attrs:{value:"2"}},[t._v("未接种")])]),t._v(" "),r("f7-list-input",{attrs:{label:"宠物类别",value:t.petType,type:"text",placeholder:"宠物类别"}}),t._v(" "),r("f7-list-input",{attrs:{label:"品种",value:t.type,type:"text",placeholder:"品种"}})],1),t._v(" "),r("div",{staticClass:"block block-strong"},[r("div",{staticClass:"block-header"},[t._v("上传头像")]),t._v(" "),r("picture-input",{ref:"pictureInput",attrs:{width:"200",height:"200",margin:"16",accept:"image/*",size:"10",hideChangeButton:"",removable:!0,customStrings:{upload:"<p>上传头像</p>",tap:"<p>上传头像</p>",remove:"清除"}},on:{change:t.onChange}})],1),t._v(" "),r("f7-block",[r("f7-row",[r("f7-button",{staticClass:"col",attrs:{raised:""},on:{click:t.back}},[t._v("取消")]),t._v(" "),r("f7-button",{staticClass:"col",attrs:{fill:"",raised:"",color:"green"},on:{click:t.submitPetData}},[t._v("提交")])],1)],1)],1)},[],!1,null,null,null).exports,he=new RegExp("^(?=\\d{11}$)^1(?:3\\d|4[57]|5[^4\\D]|66|7[^249\\D]|8\\d|9[89])\\d{8}$"),de={data:function(){return{username:"",password:"",showUsernameError:!1,showPasswordError:!1,passwordErrorMsg:"",usernameErrorMsg:""}},methods:p()({},Object(Lt.d)(["updateUserStatus"]),{signIn:(Ct=l()(o.a.mark(function t(){var e,r,a,n,s=this;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((e=this).$f7,e.$f7router,r=he.test(this.username),a=0===this.username.length,!r||a)return this.showUsernameError=!0,this.usernameErrorMsg=a?"请输入手机号":"手机号格式不正确",setTimeout(function(){s.showUsernameError=!1,s.usernameErrorMsg=""},1e3),t.abrupt("return");t.next=10;break;case 10:if(0===this.password.length)return this.showPasswordError=!0,this.passwordErrorMsg="密码不能为空",setTimeout(function(){s.showPasswordError=!1},1e3),t.abrupt("return");t.next=17;break;case 17:if(this.password.length<6)return this.showPasswordError=!0,this.passwordErrorMsg="密码不能小于6位",setTimeout(function(){s.showPasswordError=!1},1e3),t.abrupt("return");t.next=24;break;case 24:if(64<this.password.length)return this.showPasswordError=!0,this.passwordErrorMsg="密码不能大于64位",setTimeout(function(){s.showPasswordError=!1},1e3),t.abrupt("return");t.next=29;break;case 29:return t.prev=29,this.$f7.preloader.show(),t.next=33,K({username:this.username,password:this.password});case 33:n=t.sent,this.$f7.preloader.hide(),0===n.iRet?(this.updateUserStatus({userId:n.data.userId,userInfo:n.data}),this.$f7.views.main.router.navigate("/")):(console.error(n),"Incorrect username or password."===n.data[0]?this.toast("密码或者手机号不正确"):this.toast("登录失败")),t.next=43;break;case 38:t.prev=38,t.t0=t.catch(29),this.$f7.preloader.hide(),console.error(t.t0),this.toast("登录失败");case 43:case"end":return t.stop()}},t,this,[[29,38]])})),function(){return Ct.apply(this,arguments)}),signUp:function(){this.$f7router.navigate("/user/signup")},toast:function(t){this.$f7.toast.create({text:t,closeTimeout:2e3,position:"center"}).open()}})},me=Object(f.a)(de,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("f7-page",{attrs:{"no-toolbar":"","no-navbar":"","no-swipeback":"","login-screen":""}},[r("f7-login-screen-title",[t._v("宠伢")]),t._v(" "),r("f7-list",{attrs:{form:""}},[r("f7-list-input",{attrs:{label:"手机号",type:"text",placeholder:"12366660000","error-message-force":t.showUsernameError,"error-message":t.usernameErrorMsg,value:t.username},on:{input:function(e){t.username=e.target.value}}}),t._v(" "),r("f7-list-input",{attrs:{label:"密码",type:"password",placeholder:"密码","error-message":t.passwordErrorMsg,"error-message-force":t.showPasswordError,value:t.password},on:{input:function(e){t.password=e.target.value}}})],1),t._v(" "),r("f7-list",[r("f7-list-button",{on:{click:t.signIn}},[t._v("登录")]),t._v(" "),r("f7-list-button",{on:{click:t.signUp}},[t._v("注册")])],1)],1)},[],!1,null,null,null).exports,ve=new RegExp("^(?=\\d{11}$)^1(?:3\\d|4[57]|5[^4\\D]|66|7[^249\\D]|8\\d|9[89])\\d{8}$"),ge={components:{DateTime:oe,PictureInput:ce.a},data:function(){return{name:"",email:"",nickname:"",username:"",password:"",gender:"",age:"",homeAddress:"",workAddress:"",picture:"",showUsernameError:!1,showPasswordError:!1,passwordErrorMsg:""}},methods:{resetAllProps:function(){this.name="",this.email="",this.nickname="",this.username="",this.password="",this.gender="",this.age="",this.homeAddress="",this.workAddress="",this.showUsernameError=!1,this.showPasswordError=!1,this.passwordErrorMsg="",this.picture=""},onAgeChange:function(t){this.age=t},onChange:function(t){console.log(this.$refs.pictureInput.image),this.picture=t},toast:function(t){var e=this,r=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];this.$f7.toast.create({text:t,closeTimeout:2e3,position:"center",on:{close:function(){r&&e.back()}}}).open()},submitSignupData:(Tt=l()(o.a.mark(function t(){var e,r=this;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(ve.test(this.username)){t.next=4;break}return this.showUsernameError=!0,setTimeout(function(){r.showUsernameError=!1},1e3),t.abrupt("return");case 4:if(0===this.password.length)return this.showPasswordError=!0,this.passwordErrorMsg="密码不能为空",setTimeout(function(){r.showPasswordError=!1},1e3),t.abrupt("return");t.next=11;break;case 11:if(this.password.length<6)return this.showPasswordError=!0,this.passwordErrorMsg="密码不能小于6位",setTimeout(function(){r.showPasswordError=!1},1e3),t.abrupt("return");t.next=18;break;case 18:if(64<this.password.length)return this.showPasswordError=!0,this.passwordErrorMsg="密码不能大于64位",setTimeout(function(){r.showPasswordError=!1},1e3),t.abrupt("return");t.next=23;break;case 23:if(this.picture){t.next=26;break}return this.toast("请上传头像",!1),t.abrupt("return");case 26:return t.prev=26,t.next=29,Q({name:this.name,email:this.email,nickname:this.nickname,username:this.username,password:this.password,gender:this.gender,age:this.age,homeAddress:this.homeAddress,workAddress:this.workAddress,picture:this.picture});case 29:0===(e=t.sent).iRet?(this.toast("注册成功"),this.resetAllProps()):("该用户名已被注册"===e.data[0]&&(e.data[0]="该手机号已被注册"),this.toast(e.data[0],!1)),t.next=37;break;case 33:t.prev=33,t.t0=t.catch(26),console.error(t.t0),this.$f7.dialog.alert("注册失败, 请重试");case 37:case"end":return t.stop()}},t,this,[[26,33]])})),function(){return Tt.apply(this,arguments)}),back:function(){this.$f7router.back()}}},be=Object(f.a)(ge,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("f7-page",{staticClass:"me-sign-up",attrs:{"no-toolbar":""}},[r("f7-navbar",{attrs:{"back-link":"返回",sliding:"",title:"注册"}}),t._v(" "),r("f7-list",{attrs:{"no-hairlines-md":""}},[r("f7-list-input",{attrs:{value:t.name,label:"姓名",type:"text",placeholder:"姓名"},on:{input:function(e){t.name=e.target.value}}}),t._v(" "),r("f7-list-input",{attrs:{value:t.email,label:"邮箱",type:"email",placeholder:"example@example.com"},on:{input:function(e){t.email=e.target.value}}}),t._v(" "),r("f7-list-input",{attrs:{value:t.nickname,label:"昵称",type:"text",placeholder:"昵称"},on:{input:function(e){t.nickname=e.target.value}}}),t._v(" "),r("f7-list-input",{attrs:{"error-message":"手机号格式不正确","error-message-force":t.showUsernameError,value:t.username,label:"手机号",placeholder:"手机号"},on:{input:function(e){t.username=e.target.value}}}),t._v(" "),r("f7-list-input",{attrs:{"error-message":t.passwordErrorMsg,"error-message-force":t.showPasswordError,value:t.password,label:"密码",type:"password",placeholder:"密码"},on:{input:function(e){t.password=e.target.value}}}),t._v(" "),r("f7-list-input",{attrs:{value:t.gender,label:"性别",type:"select"},on:{input:function(e){t.gender=e.target.value}}},[r("option",{attrs:{value:"1"}},[t._v("男")]),t._v(" "),r("option",{attrs:{value:"2"}},[t._v("女")]),t._v(" "),r("option",{attrs:{value:"3"}},[t._v("待定")])]),t._v(" "),r("f7-list-input",{attrs:{label:"年龄",input:!1}},[r("f7-range",{attrs:{slot:"input",label:"",value:18,min:0,max:100,step:1},on:{rangeChange:t.onAgeChange},slot:"input"})],1),t._v(" "),r("f7-list-input",{attrs:{value:t.homeAddress,label:"居住地址",type:"textarea",placeholder:"居住地址",resizable:""},on:{input:function(e){t.homeAddress=e.target.value}}}),t._v(" "),r("f7-list-input",{attrs:{value:t.workAddress,label:"工作单位",type:"textarea",placeholder:"工作单位",resizable:""},on:{input:function(e){t.workAddress=e.target.value}}})],1),t._v(" "),r("div",{staticClass:"block block-strong"},[r("div",{staticClass:"block-header"},[t._v("上传头像")]),t._v(" "),r("picture-input",{ref:"pictureInput",attrs:{width:"200",height:"200",margin:"16",accept:"image/*",size:"10",hideChangeButton:"",removable:!0,customStrings:{upload:"<p>上传头像</p>",tap:"<p>上传头像</p>",remove:"清除"}},on:{change:t.onChange}})],1),t._v(" "),r("f7-block",[r("f7-row",[r("f7-button",{staticClass:"col",attrs:{raised:""},on:{click:t.back}},[t._v("取消")]),t._v(" "),r("f7-button",{staticClass:"col",attrs:{fill:"",raised:"",color:"green"},on:{click:t.submitSignupData}},[t._v("注册")])],1)],1)],1)},[],!1,null,null,null).exports,we={data:function(){return{user:{},pet:{},isGetUserInfo:!1}},computed:p()({},Object(Lt.e)(["user"]),{link:function(){if(this.user.userId)return"/person/detail/".concat(this.user.userId)}}),methods:{onPageBeforeIn:(Pt=l()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.user.isLogin){t.next=3;break}return t.abrupt("return");case 3:if(this.isGetUserInfo)return t.abrupt("return");t.next=5;break;case 5:return t.next=7,N();case 7:0===(e=t.sent).iRet?(e.data.userInfo&&(this.user=e.data.userInfo),e.data.pet&&(this.pet=e.data.pet),this.isGetUserInfo=!0):console.error(e),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.error(t.t0);case 14:case"end":return t.stop()}},t,this,[[0,11]])})),function(){return Pt.apply(this,arguments)})}},ke=(r(92),Object(f.a)(we,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("f7-page",{attrs:{id:"personView"},on:{"page:beforein":t.onPageBeforeIn}},[r("f7-navbar",{attrs:{title:"我的"}}),t._v(" "),r("f7-list",{staticClass:"me-person-profile"},[r("f7-list-item",{attrs:{link:t.link}},[r("img",{attrs:{slot:"media",src:t.user.image},slot:"media"}),t._v(" "),r("div",{attrs:{slot:"inner-start"},slot:"inner-start"},[r("div",{staticClass:"me-person-name"},[t._v(t._s(t.user.nickname))]),t._v(" "),r("div",{staticClass:"me-person-master-pet"},[t._v(t._s(t.pet&&t.pet.name||""))])])])],1),t._v(" "),r("f7-list",{staticClass:"me-person-pet-list"},[r("f7-list-item",{attrs:{divider:"",title:"我的宠物"}}),t._v(" "),r("li",{staticClass:"item-content"},[r("a",{attrs:{href:"/person/pets"}},[r("div",{staticClass:"item-inner item-cell"},[r("div",{staticClass:"item-row"},[r("div",{staticClass:"item-cell"},[r("i",{staticClass:"iconfont icon-pets"}),t._v(" "),r("div",[t._v("宠物")])])])])])])],1),t._v(" "),r("f7-list",{staticClass:"me-person-tweet"},[r("f7-list-item",{attrs:{divider:"",title:"我的互动"}}),t._v(" "),r("a",{attrs:{href:"/person/tweets"}},[r("li",{staticClass:"item-content"},[r("div",{staticClass:"item-inner item-cell"},[r("div",{staticClass:"item-row"},[r("div",{staticClass:"item-cell"},[r("i",{staticClass:"iconfont icon-activity1"}),t._v(" "),r("div",[t._v("动态")])])])])])])],1),t._v(" "),r("f7-list",{staticClass:"me-person-activity"},[r("f7-list-item",{attrs:{divider:"",title:"我的活动"}}),t._v(" "),r("a",{attrs:{href:"/person/activities"}},[r("li",{staticClass:"item-content"},[r("div",{staticClass:"item-inner item-cell"},[r("div",{staticClass:"item-row"},[r("div",{staticClass:"item-cell"},[r("i",{staticClass:"iconfont icon-xunzhang"}),t._v("\n              活动勋章\n            ")]),t._v(" "),r("div",{staticClass:"item-cell"},[r("i",{staticClass:"iconfont icon-xunzhang"}),t._v("\n              赛事勋章\n            ")])])])])])],1),t._v(" "),r("f7-list",{staticClass:"me-person-other"},[r("f7-list-item",{attrs:{divider:"",title:"其他"}}),t._v(" "),r("a",{attrs:{href:"/market/add"}},[r("li",{staticClass:"item-content"},[r("div",{staticClass:"item-inner item-cell"},[r("div",{staticClass:"item-row"},[r("div",{staticClass:"item-cell"},[r("i",{staticClass:"iconfont icon-shangjia"}),t._v(" "),r("div",[t._v("商家")])])])])])])],1)],1)},[],!1,null,"1f2ac770",null).exports),xe={props:{marketList:{type:Array}},methods:{getDetailLink:function(t){return"/market/detail/".concat(t.marketId)}}},_e=Object(f.a)(xe,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("f7-list",{staticClass:"me-media-list me-market-list",attrs:{"media-list":""}},t._l(t.marketList,function(e){return r("f7-list-item",{key:e.marketId,attrs:{link:t.getDetailLink(e),"media-item":"",title:e.name}},[r("img",{staticClass:"lazy lazy-fade-in",attrs:{slot:"media",src:e.image,width:"80"},slot:"media"})])}),1)},[],!1,null,null,null).exports,ye={computed:p()({},Object(Lt.e)(["user"])),components:{BannerSwiper:Nt,MarketList:_e},data:function(){return{bannerImages:[],showMarketPreloader:!0,allowInfinite:!0,marketList:[],page:1,isFirstPageIn:!1}},methods:{onPageBeforeIn:function(){this.user.isLogin&&(this.isFirstPageIn||(this.getIndexMarketList(),this.isFirstPageIn=!0))},onMarketPageRefresh:(jt=l()(o.a.mark(function t(e,r){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,J();case 3:(a=t.sent).length<6?this.showMarketPreloader=!1:console.error(a),this.marketList=a,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0);case 11:return t.prev=11,r(),t.finish(11);case 14:case"end":return t.stop()}},t,this,[[0,8,11,14]])})),function(){return jt.apply(this,arguments)}),onMarketLoadMore:(At=l()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.allowInfinite){t.next=3;break}return t.abrupt("return");case 3:return this.allowInfinite=!0,t.next=6,J({offset:this.page+1});case 6:if(0!==(e=t.sent).iRet){t.next=15;break}if(0===e.data.length)return this.showMarketPreloader=!1,t.abrupt("return");t.next=11;break;case 11:this.page+=1,this.marketList=[].concat(re()(this.marketList),re()(e.data)),t.next=16;break;case 15:console.error(e);case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),console.error(t.t0);case 21:return t.prev=21,this.allowInfinite=!0,t.finish(21);case 24:case"end":return t.stop()}},t,this,[[0,18,21,24]])})),function(){return At.apply(this,arguments)}),getIndexMarketList:(Et=l()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,J({offset:1});case 3:0===(e=t.sent).iRet?(e.data.length<6&&(this.showMarketPreloader=!1),this.marketList=e.data):console.error(e),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])})),function(){return Et.apply(this,arguments)})}},Ie=(r(93),Object(f.a)(ye,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("f7-page",{attrs:{id:"marketView",tabs:"","page-content":!1},on:{"page:beforein":t.onPageBeforeIn}},[r("f7-navbar",{attrs:{title:"市场"}}),t._v(" "),r("f7-page-content",{staticClass:"me-market-page-content",attrs:{tab:"","tab-active":"",ptr:"",infinite:"","infinite-preloader":t.showMarketPreloader},on:{"ptr:refresh":t.onMarketPageRefresh,infinite:t.onMarketLoadMore}},[r("banner-swiper",{attrs:{bannerImages:t.bannerImages}}),t._v(" "),t.marketList.length?r("market-list",{attrs:{marketList:t.marketList}}):r("f7-block",{attrs:{inset:"",strong:""}},[r("p",[t._v("暂无相关市场信息")])])],1),t._v(" "),r("f7-fab",{attrs:{slot:"fixed",position:"right-bottom",color:"orange",href:"/market/add"},slot:"fixed"},[r("f7-icon",{attrs:{ios:"f7:add",aurora:"f7:add",md:"material:add"}})],1)],1)},[],!1,null,"c8f63752",null).exports),Ce={components:{PictureInput:ce.a},data:function(){return{name:"",contact:"",phoneNumber:"",place:"",serveType:-1,workTime:"",intro:"",picture:"",showNameErrorMsg:!1,showContactErrorMsg:!1,showPhoneNumberErrorMsg:!1,showPlaceErrorMsg:!1,showPictureErrorMsg:!1,showServeTypeErrorMsg:!1}},methods:{onChange:function(t){this.picture=t},toast:function(t){this.$f7.toast.create({text:t,closeTimeout:2e3,position:"center"}).open()},back:function(){this.$f7router.back()},resetAllProps:function(){this.name="",this.contact="",this.phoneNumber="",this.place="",this.serveType=-1,this.workTime="",this.intro="",this.picture=""},submitMarketData:($t=l()(o.a.mark(function t(){var e,r=this;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,setTimeout(function(){r.showNameErrorMsg=!1,r.showContactErrorMsg=!1,r.showPhoneNumberErrorMsg=!1,r.showPlaceErrorMsg=!1,r.showServeTypeErrorMsg=!1},2e3),this.name){t.next=4;break}return t.abrupt("return",this.showNameErrorMsg=!0);case 4:if(this.contact){t.next=6;break}return t.abrupt("return",this.showContactErrorMsg=!0);case 6:if(this.phoneNumber){t.next=8;break}return t.abrupt("return",this.showPhoneNumberErrorMsg=!0);case 8:if(this.place){t.next=10;break}return t.abrupt("return",this.showPlaceErrorMsg=!0);case 10:if(!this.serveType<0)return t.abrupt("return",this.showServeTypeErrorMsg=!0);t.next=12;break;case 12:if(this.picture){t.next=14;break}return t.abrupt("return",this.toast("商家封面图片不能为空",!1));case 14:return this.$f7.preloader.show(),t.next=17,V({name:this.name,contact:this.contact,phoneNumber:this.phoneNumber,place:this.place,serveType:this.serveType,workTime:this.workTime,intro:this.intro,picture:this.picture});case 17:e=t.sent,this.$f7.preloader.hide(),0===e.iRet?(this.toast("新建商家成功"),this.resetAllProps(),setTimeout(function(){r.back()},1e3)):(this.toast("新建商家失败",!1),console.error(e)),t.next=27;break;case 22:t.prev=22,t.t0=t.catch(0),console.error(t.t0),this.$f7.preloader.hide(),this.toast("创建商家失败",!1);case 27:case"end":return t.stop()}},t,this,[[0,22]])})),function(){return $t.apply(this,arguments)})}},Te=Object(f.a)(Ce,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("f7-page",{staticClass:"me-add-market",attrs:{"no-toolbar":""}},[r("f7-navbar",{attrs:{"back-link":"返回",sliding:"",title:"添加商家"}}),t._v(" "),r("f7-list",{attrs:{"no-hairlines-md":""}},[r("f7-list-input",{attrs:{label:"商家名称",type:"text",value:t.name,placeholder:"商家名称","error-message":"商家名称不能为空","error-message-force":t.showNameErrorMsg},on:{input:function(e){t.name=e.target.value}}}),t._v(" "),r("f7-list-input",{attrs:{label:"联系人",type:"text",value:t.contact,placeholder:"联系人","error-message":"联系人不能为空","error-messsage-force":t.showContactErrorMsg},on:{input:function(e){t.contact=e.target.value}}}),t._v(" "),r("f7-list-input",{attrs:{label:"联系方式",type:"text",value:t.phoneNumber,placeholder:"联系方式","error-message":"联系方式不能为空","error-message-force":t.showPhoneNumberErrorMsg},on:{input:function(e){t.phoneNumber=e.target.value}}}),t._v(" "),r("f7-list-input",{attrs:{label:"商家地址",type:"text",value:t.place,placeholder:"商家地址","error-message":"商家地址不能为空","error-message-force":t.showPlaceErrorMsg},on:{input:function(e){t.place=e.target.value}}}),t._v(" "),r("f7-list-input",{attrs:{label:"服务类型",type:"select",value:t.serveType,"error-message":"服务类型不能为空","error-message-force":t.showServeTypeErrorMsg},on:{input:function(e){t.serveType=e.target.value}}},[r("option",{attrs:{value:"1"}},[t._v("医疗")]),t._v(" "),r("option",{attrs:{value:"2"}},[t._v("美容")]),t._v(" "),r("option",{attrs:{value:"3"}},[t._v("训练")]),t._v(" "),r("option",{attrs:{value:"4"}},[t._v("拍照")]),t._v(" "),r("option",{attrs:{value:"5"}},[t._v("寄养")])]),t._v(" "),r("f7-list-input",{attrs:{label:"工作时间",type:"textarea",resizable:"",value:t.workTime},on:{input:function(e){t.workTime=e.target.value}}}),t._v(" "),r("f7-list-input",{attrs:{label:"简介",type:"textarea",resizable:"",value:t.intro},on:{input:function(e){t.intro=e.target.value}}})],1),t._v(" "),r("div",{staticClass:"block block-strong"},[r("div",{staticClass:"block-header"},[t._v("上传商家图片")]),t._v(" "),r("picture-input",{ref:"pictureInput",attrs:{width:"200",height:"200",margin:"16",accept:"image/*",size:"10",hideChangeButton:"",removable:!0,customStrings:{upload:"<p>上传商家图片</p>",tap:"<p>上传商家图片</p>",remove:"清除"}},on:{change:t.onChange}})],1),t._v(" "),r("f7-block",[r("f7-row",[r("f7-button",{staticClass:"col",attrs:{raised:""},on:{click:t.back}},[t._v("取消")]),t._v(" "),r("f7-button",{staticClass:"col",attrs:{fill:"",raised:"",color:"green"},on:{click:t.submitMarketData}},[t._v("确认")])],1)],1)],1)},[],!1,null,null,null).exports;function Pe(){return Ot.apply(this,arguments)}var Ee,Ae,je,$e,Oe,Me,Se,Fe,Le,Re,Be,De,ze,Ue,Ne,Ge,qe={data:function(){return{allPets:[],isPageFirstIn:!1}},methods:{getDetailLink:function(t){return"/pet/detail/".concat(t.petId)},onPageBeforeIn:function(){this.isPageFirstIn||this.getAllPets()},getAllPets:(Ot=l()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,getAllPets();case 3:0===(e=t.sent).iRet?this.allPets=e.data:console.error(e),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])})),Pe.toString=function(){return Ot.toString()},Pe)}},Ve=Object(f.a)(qe,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("f7-page",{attrs:{tabs:"","no-toolbar":""},on:{"page:beforein":t.onPageBeforeIn}},[r("f7-navbar",{attrs:{title:"我的宠物","back-link":"返回"}}),t._v(" "),t.allPets.length?r("f7-list",{staticClass:"me-media-list me-person-all-pets",attrs:{"media-list":""}},t._l(t.allPets,function(e){return r("f7-list-item",{key:e.petId,attrs:{"media-item":"",link:t.getDetailLink(e),title:e.name}},[r("img",{staticClass:"lazy lazy-fade-in",attrs:{slot:"media",src:e.image,width:"80"},slot:"media"})])}),1):r("f7-block",{attrs:{inset:""}},[r("p",[t._v("暂无宠物信息")])]),t._v(" "),r("f7-fab",{attrs:{slot:"fixed",position:"right-bottom",color:"orange",href:"/pet/add"},slot:"fixed"},[r("f7-icon",{attrs:{ios:"f7:add",aurora:"f7:add",md:"material:add"}})],1)],1)},[],!1,null,null,null).exports,Je=r(16),Ye=r.n(Je)()({methods:{},data:function(){return{activities:[],page:1,showPreloader:!0,allowInfinite:!0,isLoadAll:!1,isPageFirstIn:!1}}},"methods",{onPageBeforeIn:function(){this.isPageFirstIn||(this.getIndexActivities(),this.isPageFirstIn=!0)},onRefresh:(je=l()(o.a.mark(function t(e){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getIndexActivities();case 2:e();case 3:case"end":return t.stop()}},t,this)})),function(){return je.apply(this,arguments)}),loadMore:(Ae=l()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.allowInfinite||this.isLoadAll)return t.abrupt("return");t.next=2;break;case 2:return this.allowInfinite=!1,t.prev=3,t.next=6,W({page:this.page+1});case 6:0===(e=t.sent).iRet?(this.page=this.page+1,0===e.data.length?(this.showPreloader=!1,this.isLoadAll=!0):this.activities=[].concat(re()(e.data),re()(this.activities))):console.error(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),console.error(t.t0);case 13:return t.prev=13,this.allowInfinite=!0,t.finish(13);case 16:case"end":return t.stop()}},t,this,[[3,10,13,16]])})),function(){return Ae.apply(this,arguments)}),getIndexActivities:(Ee=l()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,W({page:1});case 3:0===(e=t.sent).iRet?this.activities=e.data:console.error(e),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])})),function(){return Ee.apply(this,arguments)})}),He=Object(f.a)(Ye,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("f7-page",{attrs:{"no-toolbar":"",ptr:"","infinite-preloader":t.showPreloader},on:{"ptr:refresh":t.onRefresh,infinite:t.loadMore,"page:beforein":t.onPageBeforeIn}},[r("f7-navbar",{attrs:{title:"我的赛事","back-link":"返回"}}),t._v(" "),t.activities.length?r("f7-list",{staticClass:"me-media-list me-acitivities",attrs:{"media-list":""}},t._l(t.activities,function(t){return r("f7-list-item",{key:t.activityId,attrs:{link:"#","media-item":""}})}),1):r("f7-block",{attrs:{inset:""}},[r("p",[t._v("暂无赛事信息")])])],1)},[],!1,null,null,null).exports,Ke={components:{CardList:zt},data:function(){return{tweets:[],page:1,showPreloader:!0,allowInfinite:!0,isLoadAll:!1,isPageFirstIn:!1}},methods:{onPageBeforeIn:function(){this.isPageFirstIn||(this.getIndexTweets(),this.isPageFirstIn=!0)},onRefresh:(Me=l()(o.a.mark(function t(e){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getIndexTweets();case 2:e();case 3:case"end":return t.stop()}},t,this)})),function(){return Me.apply(this,arguments)}),loadMoreTweets:(Oe=l()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.allowInfinite||this.isLoadAll)return t.abrupt("return");t.next=2;break;case 2:return this.allowInfinite=!1,t.prev=3,t.next=6,G({page:this.page+1});case 6:0===(e=t.sent).iRet?(this.page=this.page+1,0===e.data.length?(this.showPreloader=!1,this.isLoadAll=!0):this.tweets=[].concat(re()(e.data),re()(this.tweets))):console.error(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),console.error(t.t0);case 13:return t.prev=13,this.allowInfinite=!0,t.finish(13);case 16:case"end":return t.stop()}},t,this,[[3,10,13,16]])})),function(){return Oe.apply(this,arguments)}),getIndexTweets:($e=l()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,G({page:1});case 3:0===(e=t.sent).iRet?this.tweets=e.data:console.error(e),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])})),function(){return $e.apply(this,arguments)})}},Qe=Object(f.a)(Ke,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("f7-page",{attrs:{id:"personTweetsView","no-toolbar":"",ptr:"","infinite-preloader":t.showPreloader},on:{"ptr:refresh":t.onRefresh,infinite:t.loadMoreTweets,"page:beforein":t.onPageBeforeIn}},[r("f7-navbar",{attrs:{title:"我的动态","back-link":"返回"}}),t._v(" "),t.tweets.length?r("card-list",{attrs:{loadCardData:t.tweets}}):r("f7-block",{attrs:{inset:""}},[t._v("暂无动态")])],1)},[],!1,null,null,null).exports,We={props:{activityId:null},data:function(){return{backText:"返回",activityInfo:null}},methods:{onPageBeforeIn:function(){this.getActivityInfo()},getActivityInfo:(Se=l()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,X({activityId:this.activityId});case 3:0===(e=t.sent).iRet?this.activityInfo=e.data:console.error(e),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])})),function(){return Se.apply(this,arguments)})}},Xe=(r(94),Object(f.a)(We,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("f7-page",{attrs:{name:"activityDetail","no-toolbar":""}},[r("f7-navbar",{attrs:{"back-link":t.backText,sliding:"",title:"活动信息"}}),t._v(" "),r("f7-block-title",[t._v("赛事信息")]),t._v(" "),t.activityInfo?r("f7-list",{staticClass:"me-activity-detail-list"},[r("f7-list-item",{attrs:{header:"活动开始时间",title:t.activityInfo.beginTime}}),t._v(" "),r("f7-list-item",{attrs:{header:"活动结束时间",title:t.activityInfo.endTime}}),t._v(" "),r("f7-list-item",{attrs:{header:"报名总人数",title:t.activityInfo.totalCount}}),t._v(" "),r("f7-list-item",{attrs:{header:"报名总费用",title:t.activityInfo.totalCost}}),t._v(" "),r("f7-list-item",{attrs:{header:"报名开始时间",title:t.activityInfo.joinBeginTime}}),t._v(" "),r("f7-list-item",{attrs:{header:"报名结束时间",title:t.activityInfo.joinEndTime}}),t._v(" "),r("f7-list-item",{attrs:{"media-item":"",header:"主办方",text:t.activityInfo.organizer}}),t._v(" "),r("f7-list-item",{attrs:{"media-item":"",header:"承办方",text:t.activityInfo.coorganizer}}),t._v(" "),r("f7-list-item",{attrs:{"media-item":"",header:"活动地点",text:t.activityInfo.place}})],1):r("f7-block",{attrs:{inset:""}},[t._v("暂无赛事信息")])],1)},[],!1,null,"6c428cce",null).exports),Ze={props:{marketId:null},data:function(){return{backText:"返回",marketInfo:null}},methods:{onPageBeforeIn:function(){this.getMarketInfo()},getMarketInfo:(Fe=l()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,q({marketId:this.marketId});case 3:0===(e=t.sent).iRet?this.marketInfo=e.data:console.error(e),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])})),function(){return Fe.apply(this,arguments)})}},tr=(r(95),Object(f.a)(Ze,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("f7-page",{attrs:{name:"marketDetail","no-toolbar":""},on:{"page:beforein":t.onPageBeforeIn}},[r("f7-navbar",{attrs:{"back-link":t.backText,sliding:"",title:"商家信息"}}),t._v(" "),r("f7-block-title",[t._v("商家信息")]),t._v(" "),t.marketInfo?r("f7-list",{staticClass:"me-market-detail-list"},[r("f7-list-item",{attrs:{header:"商家名称",title:t.marketInfo.name}}),t._v(" "),r("f7-list-item",{attrs:{header:"联系人",title:t.marketInfo.contact}}),t._v(" "),r("f7-list-item",{attrs:{header:"联系方式",title:t.marketInfo.phoneNumber}}),t._v(" "),r("f7-list-item",{attrs:{"media-item":"",header:"地点",text:t.marketInfo.place}}),t._v(" "),r("f7-list-item",{attrs:{header:"工作时间",text:t.marketInfo.workTime}}),t._v(" "),r("f7-list-item",{attrs:{header:"简介",text:t.marketInfo.intro}})],1):r("f7-block",{attrs:{inset:""}},[t._v("暂无商家信息")])],1)},[],!1,null,"68f3436d",null).exports),er={data:function(){return{backText:"返回",userInfo:null}},methods:{onPageAfterIn:(Le=l()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N();case 3:0===(e=t.sent).iRet?this.userInfo=e.userInfo:console.error(e),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])})),function(){return Le.apply(this,arguments)})}},rr=(r(96),Object(f.a)(er,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("f7-page",{attrs:{name:"personDetail","no-toolbar":""},on:{"page:afterin":t.onPageAfterIn}},[r("f7-navbar",{attrs:{"back-link":t.backText,sliding:"",title:"个人信息"}}),t._v(" "),r("f7-block-title",[t._v("用户信息")]),t._v(" "),t.userInfo?r("f7-list",{staticClass:"me-person-detail-list"},[r("f7-list-item",{attrs:{header:"姓名",title:t.userInfo.name}}),t._v(" "),r("f7-list-item",{attrs:{header:"昵称",title:t.userInfo.nickname}}),t._v(" "),r("f7-list-item",{attrs:{header:"性别",title:t.userInfo.gender}}),t._v(" "),r("f7-list-item",{attrs:{header:"年龄",title:t.userInfo.age}}),t._v(" "),r("f7-list-item",{attrs:{"media-item":"",header:"家庭住址",text:t.userInfo.homeAddress}}),t._v(" "),r("f7-list-item",{attrs:{"media-item":"",header:"工作地址",text:t.userInfo.workAddress}})],1):r("f7-block",{attrs:{inset:""}},[t._v("暂无个人相关信息")])],1)},[],!1,null,"23f4c8ae",null).exports),ar={props:{petId:null},data:function(){return{backText:"返回",petInfo:null}},methods:{onPageBeforeIn:function(){this.getPetDetail()},getPetDetail:(Re=l()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,U({petId:this.petId});case 3:0===(e=t.sent).iRet?this.petInfo=e.data:console.error(e),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])})),function(){return Re.apply(this,arguments)})}},nr=Object(f.a)(ar,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("f7-page",{attrs:{name:"petDetail","no-toolbar":""},on:{"page:beforein":t.onPageBeforeIn}},[r("f7-navbar",{attrs:{"back-link":t.backText,sliding:"",title:"宠物信息"}}),t._v(" "),r("f7-block-title",[t._v("宠物信息")]),t._v(" "),t.petInfo?r("f7-list",{staticClass:"me-pet-detail-list"},[r("f7-list-item",{attrs:{header:"宠物昵称",title:t.petDetail.nickname}}),t._v(" "),r("f7-list-item",{attrs:{header:"宠物性别",title:t.petDetail.gender}}),t._v(" "),r("f7-list-item",{attrs:{header:"年龄",title:t.petDetail.age}}),t._v(" "),r("f7-list-item",{attrs:{header:"疫苗状况",title:t.petDetail.vaccineStatus}}),t._v(" "),r("f7-list-item",{attrs:{header:"宠物类型",title:t.petDetail.petType}}),t._v(" "),r("f7-list-item",{attrs:{header:"品种",title:t.petDetail.type}})],1):r("f7-block",{attrs:{inset:""}},[t._v("暂无宠物信息")])],1)},[],!1,null,null,null).exports,sr=[{path:"/",component:Qt,keepAlive:!0},{path:"/topic/:topicId/",async:(Be=l()(o.a.mark(function t(e,r,a){var n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=routeTo.params.topicId,a({component:Xt},{props:{topicId:n}});case 2:case"end":return t.stop()}},t)})),function(){return Be.apply(this,arguments)})},{path:"/tweet/:tweetId",async:function(t,e,r){var a=t.params.tweetId;r({component:te},{props:{tweetId:a}})}},{path:"/activities/",component:se,keepAlive:!0},{path:"/activities/add",component:ue},{path:"/activities/detail/:activityId",async:function(t,e,r){var a=t.params.activityId;r({component:Xe},{props:{activityId:a}})}},{path:"/pet/add",component:fe},{path:"/pet/detail/:petId",async:function(t,e,r){var a=t.params.petId;r({component:nr},{props:{petId:a}})}},{path:"/person",component:ke,keepAlive:!0},{path:"/person/detail",component:rr},{path:"/person/pets",component:Ve},{path:"/person/activities",component:He},{path:"/person/tweets",component:Qe},{path:"/market",component:Ie,keepAlive:!0},{path:"/market/add",component:Te},{path:"/market/detail/:marketId",async:function(t,e,r){var a=t.params.marketId;r({component:tr},{props:{marketId:a}})}},{path:"/user/login",component:me},{path:"/user/signup",component:be},{path:"(.*)",component:h}],ir={props:{enableTools:{type:Boolean,default:!1},editorText:{type:String,default:""},placeholder:{type:String,default:""},imagePreviewUrl:{type:String,default:""}},methods:{editorTextChange:function(t){this.$emit("text:input",t.target.value)},imgFileOnChange:function(t){var e=this,r=t.target.files[0];if(r)if(at.test(r.type)){var a=new FileReader;a.onload=function(t){e.$emit("image:input",t.target,a.result)},a.readAsDataURL(r)}else this.$f7.dialog.alert("请上传图片","格式不正确")}}},or=(r(97),Object(f.a)(ir,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"me-editor-container"},[r("textarea",{attrs:{type:"textarea",placeholder:t.placeholder},domProps:{value:t.editorText},on:{input:t.editorTextChange}}),t._v(" "),t.enableTools?r("div",{staticClass:"block me-profile-image-container"},[r("div",{staticClass:"me-profile-image-div"},[t.imagePreviewUrl?r("img",{staticClass:"me-profile-image",attrs:{src:t.imagePreviewUrl}}):r("i",{staticClass:"iconfont icon-shangchuantupian me-upload-image-icon"})]),t._v(" "),t.enableTools?r("div",{staticClass:"me-profile-buttons-div"},[r("div",{staticClass:"me-profile-img-input"},[r("label",{staticClass:"me-upload-image",attrs:{for:"me-upload-image"}},[t._v("上传图片")]),t._v(" "),r("input",{staticClass:"me-input-image",attrs:{type:"file",id:"me-upload-image",name:"me-upload-image",accept:"image/*"},on:{change:t.imgFileOnChange}})])]):t._e()]):t._e()])},[],!1,null,"9ae0aeec",null).exports),cr={components:{Editor:or},computed:p()({},Object(Lt.e)({editorText:function(t){return t.popup.editorText}})),data:function(){return{imagePreviewUrl:"",file:null}},methods:p()({},Object(Lt.c)(["updatePopup"]),Object(Lt.d)(["updatePopup","updateEditorText"]),{closePopup:function(){this.updateEditorText({text:""}),this.file=null,this.imagePreviewUrl="",this.text=""},textInputChange:function(t){this.updateEditorText({text:t})},imageUpload:function(t,e){this.imagePreviewUrl=t.result,this.file=e},toast:function(t){this.$f7.toast.create({text:t,closeTimeout:2e3,position:"center"}).open()},sendTweet:(De=l()(o.a.mark(function t(){var e,r=this;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==this.editorText.length||this.file){t.next=4;break}return t.abrupt("return",this.toast("发送内容不能为空"));case 4:if(200<this.editorText.length)return t.abrupt("return",this.toast("发送文字内容不能超过200字"));t.next=6;break;case 6:return this.$f7.preloader.show(),t.prev=7,t.next=10,z({text:this.editorText,picture:this.file});case 10:e=t.sent,this.$f7.preloader.hide(),0===e.iRet?(this.toast("发送成功"),setTimeout(function(){r.closePopup()},1e3)):this.toast("发送失败"),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(7),console.error(t.t0),this.$f7.preloader.hide();case 19:case"end":return t.stop()}},t,this,[[7,15]])})),function(){return De.apply(this,arguments)})})},lr=Object(f.a)(cr,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("f7-page",[r("f7-navbar",[r("f7-nav-left",[r("f7-link",{attrs:{"popup-close":"",text:"取消"},on:{click:t.closePopup}})],1),t._v(" "),r("f7-nav-right",[r("f7-link",{attrs:{text:"发布"},on:{click:t.sendTweet}})],1)],1),t._v(" "),r("editor",{attrs:{enableTools:!0,editorText:t.editorText,imagePreviewUrl:t.imagePreviewUrl,placeholder:"发表文字"},on:{"text:input":t.textInputChange,"image:input":t.imageUpload}})],1)},[],!1,null,null,null).exports,ur={data:function(){return{text:""}},computed:p()({},Object(Lt.e)({editorText:function(t){return t.popup.editorText}})),components:{Editor:or},methods:p()({toast:function(t){this.$f7.toast.create({text:t,closeTimeout:2e3,position:"center"}).open()}},Object(Lt.d)(["updatePopup","updateEditorText"]),{closePopup:function(){this.updateEditorText({text:""})},textInputChange:function(t){this.updateEditorText({text:t})},sendComment:(ze=l()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0===this.editorText.length)return t.abrupt("return",this.toast("发送内容不能为空"));t.next=4;break;case 4:if(200<this.editorText.length)return t.abrupt("return",this.toast("发送内容不能超过200字"));t.next=6;break;case 6:return this.$f7.preloader.show(),t.prev=7,t.next=10,B({text:this.editorText});case 10:0===(e=t.sent).iRet?(this.$f7.preloader.hide(),this.toast("评论成功"),this.updatePopup({key:"commentOpened",value:!1})):(this.toast("评论失败"),console.error(e),this.$f7.preloader.hide()),t.next=19;break;case 14:t.prev=14,t.t0=t.catch(7),this.toast("评论失败"),console.error(t.t0),this.$f7.preloader.hide();case 19:case"end":return t.stop()}},t,this,[[7,14]])})),function(){return ze.apply(this,arguments)})})},pr=Object(f.a)(ur,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("f7-page",[r("f7-navbar",{attrs:{title:""}},[r("f7-nav-left",[r("f7-link",{attrs:{"popup-close":"",text:"关闭"},on:{click:t.closePopup}})],1),t._v(" "),r("f7-nav-title",{attrs:{title:"评论"}}),t._v(" "),r("f7-nav-right",[r("f7-link",{attrs:{text:"发送"},on:{click:t.sendComment}})],1)],1),t._v(" "),r("editor",{attrs:{editorText:t.editorText,placeholder:"评论点什么..."},on:{"text:input":t.textInputChange}})],1)},[],!1,null,null,null).exports,fr={data:function(){return{f7params:{name:"CutePet",theme:"ios",routes:sr}}},computed:p()({},Object(Lt.e)({commentOpened:function(t){return t.popup.commentOpened},publisherOpened:function(t){return t.popup.publisherOpened}})),components:{Comment:pr,Publisher:lr},methods:p()({},Object(Lt.d)(["updatePopup"]),Object(Lt.c)(["updateUserStatus"]),{closePopup:function(t){this.updatePopup({key:t,value:!1})}}),mounted:function(){var t;this.$f7ready((t=l()(o.a.mark(function t(e){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)}))}},hr=Object(f.a)(fr,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("f7-app",{attrs:{params:t.f7params}},[r("f7-views",{staticClass:"safe-areas",attrs:{tabs:""}},[r("f7-toolbar",{attrs:{tabbar:"",labels:"",position:"bottom"}},[r("f7-link",{attrs:{"tab-link":"#me-view-home","tab-link-active":"",icon:"iconfont icon-home",text:"首页"}}),t._v(" "),r("f7-link",{attrs:{"tab-link":"#me-view-activities","icon-ios":"f7:list_fill",text:"活动"}}),t._v(" "),r("f7-link",{attrs:{"tab-link":"#me-view-market",icon:"iconfont icon-market2",text:"市场"}}),t._v(" "),r("f7-link",{attrs:{"tab-link":"#me-view-person",icon:"iconfont icon-person",text:"我的"}})],1),t._v(" "),r("f7-view",{attrs:{id:"me-view-home",stackPages:"","tab-active":"",main:"",tab:"",url:"/"}}),t._v(" "),r("f7-view",{attrs:{id:"me-view-activities",stackPages:"",tab:"",url:"/activities/"}}),t._v(" "),r("f7-view",{attrs:{id:"me-view-market",stackPages:"",tab:"",url:"/market/"}}),t._v(" "),r("f7-view",{attrs:{id:"me-view-person",stackPages:"",tab:"",url:"/person/"}})],1),t._v(" "),r("f7-popup",{attrs:{opened:t.commentOpened},on:{"popup:closed":function(){return t.closePopup("commentOpened")}}},[r("comment")],1),t._v(" "),r("f7-popup",{attrs:{opened:t.publisherOpened},on:{"popup:closed":function(){return t.closePopup("publisherOpened")}}},[r("publisher")],1)],1)},[],!1,null,null,null).exports,dr=d.a.request.promise.postJSON,mr={getUserStatus:(Ue=l()(o.a.mark(function t(e){var r,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.commit,e.state,t.prev=1,t.next=4,dr("/api/user/person/j-status");case 4:0===(a=t.sent).iRet&&r("updateUserStatus",a.data),console.log("---用户状态",a),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.error("---用户状态出错了",t.t0);case 12:case"end":return t.stop()}},t,null,[[1,9]])})),function(){return Ue.apply(this,arguments)})},vr=n.a.request.promise.postJSON,gr={appendTweets:function(t,e){var r=e.tweets;t.tweets=[].concat(re()(t.tweets),re()(r))},prependTweets:function(t,e){var r=e.tweets;t.tweets=[].concat(re()(r),re()(t.tweets))},updateTweetById:function(t,e){var r=e.liked,a=e.tweetId,n=t.tweets.find(function(t){return t.tweetId===a});!1===r?(n.liked=!0,n.likeCount=Number(n.likeCount)+1):(n.liked=!1,n.likeCount=Number(n.likeCount)-1)},resetTweets:function(t,e){var r=e.tweets;t.tweets=r},addPageNum:function(t){t.tweetPage+=1}},br={namespaced:!0,state:{tweets:[],bannerImages:[],tweetPage:1,tweetsIsLoadAll:!1},getters:{isTweetLoadAll:function(t){return t.tweetsIsLoadAll},getTweetById:function(t){return function(e){var r=e.tweetId;return t.tweets.find(function(t){return t.tweetId===r})}}},actions:{getIndexTweets:(Ge=l()(o.a.mark(function t(e){var r,a,n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.commit,a=e.state,t.prev=1,t.next=4,vr(A,{offset:a.tweetPage});case 4:n=t.sent,console.log("获取首页tweets信息流",n),0===n.iRet?r("resetTweets",{tweets:n.data}):console.error(n),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:case"end":return t.stop()}},t,null,[[1,9]])})),function(){return Ge.apply(this,arguments)}),loadMoreTweets:(Ne=l()(o.a.mark(function t(e){var r,a,n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.commit,a=e.state,t.prev=1,a.tweetsIsLoadAll)return t.abrupt("return");t.next=4;break;case 4:return t.next=6,vr(A,{offset:a.tweetPage+1});case 6:0===(n=t.sent).iRet?0===n.data.length?a.tweetsIsLoadAll=!0:(r("addPageNum"),r("appendTweets",{tweets:n.data})):console.error(n),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0);case 13:case"end":return t.stop()}},t,null,[[1,10]])})),function(){return Ne.apply(this,arguments)})},mutations:gr};a.a.use(Lt.b);var wr=new Lt.b.Store({state:{user:{isLogin:!1,userId:null,isGetInfo:!1,userInfo:null},popup:{publisherOpened:!1,commentOpened:!1,editorText:""}},getters:{loginStatus:function(){}},actions:mr,mutations:{updatePopup:function(t,e){var r=e.key,a=e.value;t.popup[r]=a},updateEditorText:function(t,e){var r=e.text;t.popup.editorText=r},updateUserStatus:function(t,e){var r=e.userId;r&&(t.user.isLogin=!0,t.user.userId=r,t.user.isGetInfo=!0)}},modules:{home:br}});n.a.use(s.a),new a.a({el:"#app",store:wr,render:function(t){return t(hr)},components:{app:hr}})}});
//# sourceMappingURL=app.js.map